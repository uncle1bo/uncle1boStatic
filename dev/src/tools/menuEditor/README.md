# 目录编辑器

## 1. 项目结构

```
menuEditor/
├── index.js                    # 模块入口
├── menuEditorService.js        # 核心服务实现
├── routes.js                   # 路由定义
├── menu-editor-core.js         # 核心数据管理模块
├── menu-editor-state.js        # 状态管理模块
├── menu-editor-operations.js   # 业务操作模块
├── menu-editor-drag.js         # 拖拽功能模块
├── menu-editor-main.js         # 主控制器模块
└── README.md                   # 说明文档
```

## 2. 功能介绍

目录编辑器工具用于管理网站的导航菜单结构，采用模块化架构设计，支持添加、编辑、删除和重新排序导航菜单项，以及父子菜单关系的管理。

### 已实现功能列表

- **可视化编辑**：直观的导航菜单结构编辑界面
- **CRUD操作**：添加、编辑、删除和重新排序菜单项
- **多级菜单**：支持父子菜单关系（下拉菜单）
- **拖拽排序**：支持拖放操作调整菜单顺序
- **智能状态检测**：精确检测未保存更改，避免误提示
- **防抖优化**：表单输入防抖处理，提升性能
- **模块化架构**：职责分离的模块设计，便于维护
- **多语言支持**：自动更新多语言支持文件

### 架构特点

- **MenuEditorCore**：核心数据管理和DOM操作
- **MenuEditorState**：统一状态管理和UI更新
- **MenuEditorOperations**：业务操作逻辑处理
- **MenuEditorDrag**：拖拽功能实现
- **MenuEditorMain**：主控制器和事件协调

## 3. 用户使用方法

1. 启动开发服务器
2. 访问 `http://localhost:3000/menu-editor`
3. 添加、编辑或删除菜单项
4. 使用拖拽功能调整菜单顺序
5. 点击「保存所有更改」应用修改

### 操作说明

- **添加菜单项**：填写菜单文本和链接地址，选择父菜单（可选）
- **编辑菜单项**：点击编辑按钮修改菜单信息
- **删除菜单项**：点击删除按钮移除菜单项
- **调整顺序**：拖拽菜单项到目标位置
- **管理子菜单**：选择父菜单创建多级菜单结构

## 4. API使用方法

### 获取菜单数据
```javascript
GET /menu-editor/config
// 返回: 当前菜单配置的JSON数据
```

### 更新菜单数据
```javascript
POST /menu-editor/update
{
  "menuData": [...] // 新的菜单配置数据
}
// 返回: 操作结果
```

### 注意事项

- **数据安全**：系统会确保至少保留一个指向首页的链接
- **链接格式**：菜单项的链接地址应该是相对路径或完整的URL
- **层级管理**：删除父菜单项时，其子菜单项会自动提升为顶级菜单项
- **状态检测**：系统会智能检测实际数据变化，避免不必要的未保存提示
- **性能优化**：表单输入使用300ms防抖，减少频繁状态检查
- **模块依赖**：各模块按顺序加载，确保依赖关系正确
- **浏览器兼容**：支持现代浏览器的拖拽API和ES6特性